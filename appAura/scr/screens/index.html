import React, { useState } from 'react';
import { 
  View, 
  Text, 
  TextInput, 
  TouchableOpacity, 
  StyleSheet, 
  KeyboardAvoidingView, 
  Platform, 
  Image, 
  Dimensions 
} from 'react-native';
// Removemos a importação de Ionicons, pois a logo foi removida

const { height, width } = Dimensions.get('window'); 
// Cores mantidas consistentes com o tema rosa
const PRIMARY_COLOR = "#FEA7B5"; // Rosa Principal Suave do seu App
const LIGHT_BG = "#FDF6F8"; // Fundo quase branco
const GRAY_TEXT = "#707070";
const DARK_TEXT = "#333333";

export default function LoginScreen({ navigation }) {
  const [email, setEmail] = useState('');
  const [senha, setSenha] = useState('');

  const handleLogin = () => {
    // Redireciona para a tela 'Home' (homeScreen.js)
    if (navigation && navigation.navigate) {
        // Assumindo que a tela principal está mapeada como 'Home'
        navigation.navigate('Home'); 
    } else {
        console.log("Tentativa de Login:", email);
    }
  };

  return (
    <KeyboardAvoidingView
      style={styles.container}
      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
      keyboardVerticalOffset={0} 
    >
      {/* 1. Imagem de Fundo Completa (Fundo Sutil) */}
      <Image
        source={{ uri: "https://placehold.co/800x1200/FDF6F8/FEA7B5?text=FUNDO+PADR%C3%83O" }} 
        style={styles.backgroundImage}
        resizeMode="cover"
      />

      {/* 2. Área do Topo Colorida e Estilizada */}
      <View style={styles.topHeader}>
        {/* Adicionando círculos de decoração no fundo */}
        <View style={styles.decorationCircle1} />
        <View style={styles.decorationCircle2} />
        
        {/* Título ou saudação na área colorida */}
        <Text style={styles.headerTitle}>Bem-vindo(a)</Text>
      </View>

      {/* 3. Card Flutuante de Login (Mais centralizado e bonito) */}
      <View style={styles.loginCard}>
        
        <Text style={styles.title}>Faça Login</Text>

        {/* Campo E-mail */}
        <View style={styles.inputContainer}>
            <Text style={styles.label}>E-mail</Text>
            <TextInput
              style={styles.input}
              placeholder="seu.email@exemplo.com"
              keyboardType="email-address"
              autoCapitalize="none"
              value={email}
              onChangeText={setEmail}
              placeholderTextColor="#B0B0B0"
            />
        </View>
        
        {/* Campo Senha */}
        <View style={styles.inputContainer}>
            <Text style={styles.label}>Senha</Text>
            <TextInput
              style={styles.input}
              placeholder="********"
              secureTextEntry
              value={senha}
              onChangeText={setSenha}
              placeholderTextColor="#B0B0B0"
            />
        </View>
        
        {/* Esqueci a Senha - Agora posicionado com um espaçamento mais limpo */}
        <TouchableOpacity style={styles.forgotPasswordButton}>
            <Text style={styles.forgotPasswordText}>Esqueceu a senha?</Text>
        </TouchableOpacity>

        {/* Botão Entrar */}
        <TouchableOpacity style={styles.button} onPress={handleLogin}>
          <Text style={styles.buttonText}>Entrar</Text>
        </TouchableOpacity>
        
      </View>
      
      {/* 4. Link de Cadastro (Abaixo do Card) */}
      <View style={styles.registerContainer}>
        <Text style={styles.registerText}>
            Não tem uma conta? 
        </Text>
        <TouchableOpacity>
            <Text style={styles.signUpText}>Cadastre-se</Text>
        </TouchableOpacity>
      </View>
      
    </KeyboardAvoidingView>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: LIGHT_BG, 
  },
  
  // Imagem de Fundo (Preenchimento)
  backgroundImage: {
    ...StyleSheet.absoluteFillObject,
    opacity: 0.2, 
  },

  // Área superior colorida
  topHeader: {
    height: height * 0.35, // Aumentei a altura para ocupar mais espaço limpo
    backgroundColor: PRIMARY_COLOR, 
    borderBottomLeftRadius: 50,
    borderBottomRightRadius: 50,
    justifyContent: 'center', 
    alignItems: 'center',
    overflow: 'hidden', // Esconde a logo que foi removida, mantendo o visual limpo
    position: 'relative',
  },
  headerTitle: {
    fontSize: 32,
    fontWeight: '900',
    color: '#fff',
    marginBottom: 20, // Espaçamento para o card
  },

  // Círculos de decoração (estilo moderno)
  decorationCircle1: {
    position: 'absolute',
    width: 150,
    height: 150,
    borderRadius: 75,
    backgroundColor: 'rgba(255, 255, 255, 0.15)', 
    top: -50,
    left: -50,
  },
  decorationCircle2: {
    position: 'absolute',
    width: 80,
    height: 80,
    borderRadius: 40,
    backgroundColor: 'rgba(255, 255, 255, 0.1)',
    bottom: 20,
    right: 40,
  },
  
  // LOGO - Removido o logoContainer e o logo style, pois a logo não será usada
  
  // Card flutuante de Login
  loginCard: {
    width: '90%',
    backgroundColor: '#fff',
    borderRadius: 30,
    paddingHorizontal: 30, // Mais padding horizontal
    paddingVertical: 40, // Mais padding vertical
    alignSelf: 'center',
    // Ajuste o marginTop para centralizar o card no espaço da tela
    marginTop: -80, 
    shadowColor: PRIMARY_COLOR, 
    shadowOffset: { width: 0, height: 12 }, // Sombra mais proeminente
    shadowOpacity: 0.3, 
    shadowRadius: 25,
    elevation: 25,
  },
  title: {
    fontSize: 28,
    fontWeight: '800', 
    color: DARK_TEXT, // Cor de texto mais escura
    marginBottom: 35, // Espaçamento limpo
    textAlign: 'left',
  },

  // Estilos de Input
  inputContainer: {
    marginBottom: 25, // Mais espaço entre os inputs
  },
  label: {
    fontSize: 14,
    color: DARK_TEXT, 
    fontWeight: '700',
    marginBottom: 8, 
  },
  input: {
    width: '100%',
    height: 55,
    backgroundColor: '#fff', 
    borderRadius: 15,
    paddingHorizontal: 15,
    fontSize: 16,
    borderWidth: 1, 
    borderColor: '#E0E0E0', 
    // Mantive a sombra sutil para um toque 3D
  },
  
  // Esqueci a Senha
  forgotPasswordButton: {
    alignSelf: 'flex-end',
    marginBottom: 35, // Mais espaço antes do botão
  },
  forgotPasswordText: {
    color: PRIMARY_COLOR, 
    fontSize: 14,
    fontWeight: '600',
  },
  
  // Botão Entrar
  button: {
    width: '100%',
    height: 55,
    backgroundColor: PRIMARY_COLOR,
    borderRadius: 15,
    justifyContent: 'center',
    alignItems: 'center',
    shadowColor: PRIMARY_COLOR,
    shadowOffset: { width: 0, height: 10 },
    shadowOpacity: 0.6, // Sombra do botão ainda mais forte
    shadowRadius: 18,
    elevation: 15,
    marginBottom: 30, 
  },
  buttonText: {
    color: '#fff',
    fontSize: 18,
    fontWeight: '700',
  },
  
  // Cadastro (parte inferior)
  registerContainer: {
    flexDirection: 'row',
    justifyContent: 'center',
    marginTop: 20,
  },
  registerText: {
    color: GRAY_TEXT,
    fontSize: 16,
  },
  signUpText: {
    color: PRIMARY_COLOR,
    fontSize: 16,
    fontWeight: '700',
    marginLeft: 5,
  }
});
